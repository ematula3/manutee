snkyPdata <- read_csv("data/plant_dom_cov_wr22.csv")
# for (i in 1:nrow(snkyPdata)){
#   snkyPdata[i,"target"] <- paste(snkyPdata[i,"target"], " ")
# }
# define nodes
nodes <- data.frame(
name=c(as.character(snkyPdata$source),
as.character(snkyPdata$target)) %>%
unique())
# add source and target fields
snkyPdata$IDsource <- match(snkyPdata$source, nodes$name)-1
snkyPdata$IDtarget <- match(snkyPdata$target, nodes$name)-1
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
# read in snkyPdata
snkyPdata <- read_csv("data/plant_dom_cov_nof.csv")
# define nodes
nodes <- data.frame(
name=c(as.character(snkyPdata$source),
as.character(snkyPdata$target)) %>%
unique())
# add source and target fields
snkyPdata$IDsource <- match(snkyPdata$source, nodes$name)-1
snkyPdata$IDtarget <- match(snkyPdata$target, nodes$name)-1
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
# color stuff
mycols <- colors(c("#88C425","#F0CC99","178ADC","#E78B30"))
# color stuff
mycols <- colors()[c("#88C425","#F0CC99","178ADC","#E78B30")]
# color stuff
mycols <- c("#88C425","#F0CC99","178ADC","#E78B30")
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = mycols,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
mycols2 <- c("green","aquamarine","red","blue")
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = mycols,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = mycols2,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = mycols2,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
my_color <- 'd3.scaleOrdinal() .domain(["submersed 1", "rice 2"]) .range(["blue", "blue" , "blue", "red", "red", "yellow", "purple", "purple"])'
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
my_color <- 'd3.scaleOrdinal() .domain(["submersed 1", "rice 2"]) .range(["#88C425","#F0CC99","178ADC","#E78B30"])'
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
my_color <- 'd3.scaleOrdinal() .domain(["submersed 1", "rice 2"]) .range(["#F0CC99","178ADC","#E78B30","#88C425"])'
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
my_color <- 'd3.scaleOrdinal() .domain(["submersed 1", "rice 2"]) .range(["#E78B30","277CB8","#F0CC99","#88C425"])'
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
my_color <- 'd3.scaleOrdinal() .domain(["submersed 1", "rice 2"]) .range(["#E78B30","#88C425","#F0CC99","277CB8"])'
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
my_color <- 'd3.scaleOrdinal() .domain(["submersed 1", "rice 2"]) .range(["#E78B30","#88C425","#5391BD","#F0CC99"])'
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
# read in snkyPdata
snkyPdata <- read_csv("data/plant_dom_cov_wr22.csv")
# define nodes
nodes <- data.frame(
name=c(as.character(snkyPdata$source),
as.character(snkyPdata$target)) %>%
unique())
# add source and target fields
snkyPdata$IDsource <- match(snkyPdata$source, nodes$name)-1
snkyPdata$IDtarget <- match(snkyPdata$target, nodes$name)-1
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
plant_dom_cov_wr22
View(plant_dom_cov_wr22)
plant_dom_cov_wr22
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
saveNetwork(plant_dom_cov_wr22, "sankey_fin_what.html", selfcontained = TRUE)
# read in snkyPdata
snkyPdata <- read_csv("data/plant_dom_cov_wr22.csv")
# define nodes
nodes <- data.frame(
name=c(as.character(snkyPdata$source),
as.character(snkyPdata$target)) %>%
unique())
# add source and target fields
snkyPdata$IDsource <- match(snkyPdata$source, nodes$name)-1
snkyPdata$IDtarget <- match(snkyPdata$target, nodes$name)-1
# Make the Network
plant_dom_cov_wr22 <- sankeyNetwork(Links = snkyPdata,
Nodes = nodes,
Source = "IDsource",
Target = "IDtarget",
Value = "value",
NodeID = "name",
width = 1500,
height = 600,
fontSize=0,
colourScale = my_color,
iterations = 0,
sinksRight=FALSE,
margin = 1,)
plant_dom_cov_wr22
saveNetwork(plant_dom_cov_wr22, "sankey_fin_what.html", selfcontained = TRUE)
library(readr)
library(ggplot2)
cores_10_21 <- read_csv("data/cores_10_21.csv")
cores_10_21$site <- factor(cores_10_21$site)
cores_10_21$seed_type <- factor(cores_10_21$seed_type)
cores_10_21$depth <- factor(cores_10_21$depth, levels = c("29-30","28-29","27-28","26-27","25-26","24-25","23-24","22-23","21-22","20-21","19-20","18-19","17-18","16-17","15-16","14-15","13-14","12-13","11-12","10-11","9-10","8-9","7-8","6-7","5-6","4-5","3-4","2-3","1-2","0-1"))
ggplot(cores_10_21) +
aes(x = depth, fill = seed_type, weight = density) +
geom_bar(color = "black") +
coord_flip() +
scale_fill_hue(direction = 1) +
theme_bw() +
facet_wrap(vars(site))+
labs(x = "Depth (cm)",
y = "Seed Density (cm^3)")+
scale_fill_discrete(name = "Seed Type", labels = c("Nonviable", "Viable"))
library(readr)
library(ggplot2)
cores_10_21 <- read_csv("data/cores_10_21.csv")
cores_10_21 <- read_csv("data/fall21_cores.csv")
cores_10_21$site <- factor(cores_10_21$site)
cores_10_21$seed_type <- factor(cores_10_21$seed_type)
cores_10_21$depth <- factor(cores_10_21$depth, levels = c("29-30","28-29","27-28","26-27","25-26","24-25","23-24","22-23","21-22","20-21","19-20","18-19","17-18","16-17","15-16","14-15","13-14","12-13","11-12","10-11","9-10","8-9","7-8","6-7","5-6","4-5","3-4","2-3","1-2","0-1"))
fall21_cores <- read_csv("data/fall21_cores.csv")
fall21_cores$site <- factor(fall21_cores$site)
fall21_cores$seed_type <- factor(fall21_cores$seed_type)
fall21_cores$depth <- factor(fall21_cores$depth, levels = c("29-30","28-29","27-28","26-27","25-26","24-25","23-24","22-23","21-22","20-21","19-20","18-19","17-18","16-17","15-16","14-15","13-14","12-13","11-12","10-11","9-10","8-9","7-8","6-7","5-6","4-5","3-4","2-3","1-2","0-1"))
#("0-1","1-2","2-3","3-4","4-5","5-6","6-7","7-8","8-9","9-10","10-11","11-12","12-13","13-14","14-15","15-16","16-17","17-18","18-19","19-20","20-21","21-22","22-23","23-24","24-25","25-26","26-27","27-28","28-29","29-30")
ggplot(fall21_cores) +
aes(x = depth, fill = seed_type, weight = density) +
geom_bar(color = "black") +
coord_flip() +
scale_fill_hue(direction = 1) +
theme_bw() +
facet_wrap(vars(site))+
labs(x = "Depth (cm)",
y = "Seed Density (cm^3)")+
scale_fill_discrete(name = "Seed Type", labels = c("Nonviable", "Viable"))
fall21_cores <- read_csv("data/fall21_cores.csv")
fall21_cores$site <- factor(fall21_cores$site)
fall21_cores$seed_type <- factor(fall21_cores$seed_type)
fall21_cores$depth <- factor(fall21_cores$depth, levels = c("29-30","28-29","27-28","26-27","25-26","24-25","23-24","22-23","21-22","20-21","19-20","18-19","17-18","16-17","15-16","14-15","13-14","12-13","11-12","10-11","9-10","8-9","7-8","6-7","5-6","4-5","3-4","2-3","1-2","0-1"))
#("0-1","1-2","2-3","3-4","4-5","5-6","6-7","7-8","8-9","9-10","10-11","11-12","12-13","13-14","14-15","15-16","16-17","17-18","18-19","19-20","20-21","21-22","22-23","23-24","24-25","25-26","26-27","27-28","28-29","29-30")
ggplot(fall21_cores) +
aes(x = depth, fill = seed_type, weight = density) +
geom_bar(color = "black") +
coord_flip() +
scale_fill_hue(direction = 1) +
theme_bw() +
facet_wrap(vars(site))+
labs(x = "Depth (cm)",
y = "Seed Density (cm^3)")+
scale_fill_discrete(name = "Seed Type", labels = c("Nonviable", "Viable"))
ggplot(fall21_cores) +
aes(x = depth, fill = seed_type, weight = density) +
geom_bar(color = "black") +
coord_flip() +
scale_fill_hue(direction = 1) +
theme_bw() +
facet_wrap(vars(site))+
labs(x = "Depth (cm)",
y = "Seed Density (m^2)")+
scale_fill_discrete(name = "Seed Type", labels = c("Nonviable", "Viable"))
library(ggplot2)
library(readr)
#plot 1: Growth Rate
growth_rate <- read_csv("data/growth_rate.csv",
col_types = cols(sample_date = col_date(format = "%m/%d/%Y"),
year = col_factor(levels = c("2021",
"2022"))))
## Depth Hist
attach(growth_rate)
ggplot(data = growth_rate, aes(x=depth_cm))+
geom_histogram(binwidth = 1)
library(Rmisc)
summarySE(growth_rate, measurevar = "depth_cm")
## Grow up and do mutations in R
y2y2 <- read_csv("data/y2y2.csv", col_types = cols(sample_date = col_date(format = "%m/%d/%Y"),
cap_date = col_date(format = "%m/%d/%Y"),
year = col_factor(levels = c("2021",
"2022"))))
y2y2$quad_id <- factor(y2y2$quad_id)
View(y2y2)
library(dplyr)
attach(y2y2)
trial1 = case_when(depth_cm<=91 ~ 'shallow', TRUE ~ 'deep') # 3ft deep cutofff
trial2 = case_when(depth_cm<=60 ~ 'shallow', TRUE ~ 'deep') # half of the 0-4 ft range
y2y2$trial1 <- trial1
y2y2$trial2 <- trial2
View(y2y2)
y2y2$trial1 <- factor(y2y2$trial1)
y2y2$trial2 <- factor(y2y2$trial2)
### Pre and Post emergence
library(lubridate)
attach(y2y2)
emergance <- case_when(cap_date<= ymd('2022-06-24') ~ 'pre', TRUE ~ 'post')
y2y2$emergence <- emergance
y2y2$emergence <- factor(y2y2$emergence)
# Plot 5
ggplot(data=y2y2, aes(x=cap_date))+
geom_smooth(aes(y=depth_cm), size=2, color="slateblue", se=FALSE)+
geom_point(aes(y=avg_height_cm, color = year), size=4, shape=18)+
geom_smooth(aes(y=avg_height_cm, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
facet_wrap(vars(trial1))+
ylim(0,250)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("cm")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
View(y2y2)
# Plot
ggplot(data=y2y2, aes(x=cap_date))+
geom_smooth(aes(y=depth_cm), size=2, color="slateblue", se=FALSE)+
geom_point(aes(y=total_stems, color = year), size=4, shape=18)+
geom_smooth(aes(y=total_stems, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
facet_wrap(vars(trial1))+
ylim(0,250)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("Count")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
# Plot
ggplot(data=y2y2, aes(x=cap_date))+
geom_point(aes(y=total_stems, color = year), size=4, shape=18)+
geom_smooth(aes(y=total_stems, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
facet_wrap(vars(trial1))+
ylim(0,250)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("Count")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
# Plot
ggplot(data=y2y2, aes(x=cap_date))+
geom_point(aes(y=total_stems, color = year), size=4, shape=18)+
geom_smooth(aes(y=total_stems, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
facet_wrap(vars(trial1))+
ylim(0,150)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("Count")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
ggplot(data=growth_rate, aes(x=sample_date))+
geom_smooth(aes(y=depth_cm, color = year), size=2, se=FALSE)+
geom_point(aes(y=avg_height_cm, color = year), size=4, shape=18)+
geom_smooth(aes(y=avg_height_cm, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
ylim(0,250)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("cm")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
ggplot(data=y2y2, aes(x=sample_date))+
geom_point(aes(y=total_stems, color = year), size=4, shape=18)+
geom_smooth(aes(y=total_stems, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
ylim(0,150)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("Count")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
ggplot(data=y2y2, aes(x=cap_date))+
geom_point(aes(y=total_stems, color = year), size=4, shape=18)+
geom_smooth(aes(y=total_stems, color = year), se=FALSE, size=1.5, linetype = "twodash")+
scale_color_manual(values = c("2021"="#edae49", "2022"="#00798c"))+
ylim(0,150)+
theme(axis.title.x = element_text(size = 20),
axis.text.x = element_text(size = 18),
axis.text.y = element_text(size = 18),
axis.title.y = element_text(size = 20))+
xlab("Date")+
ylab("Count")+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"))
